# Claude Code Skills (Claude Code 스킬)

## 스킬이란?

**스킬(Skill)**은 사용자의 요청에 따라 Claude가 자동으로 활성화하는 재사용 가능한 프롬프트 템플릿입니다. 스킬은 `SKILL.md` 파일로 저장되며, LLM에 전송되는 프롬프트에 주입됩니다.

## 스킬 작동 방식

```
   SKILL.md 내용
         │
         ▼
   ┌───────────┐      ┌─────────┐      ┌──────────┐
   │  프롬프트  │ ───▶ │   LLM   │ ───▶ │   출력   │
   └───────────┘      └─────────┘      └──────────┘
```

### 처리 흐름

1. **사용자 입력** - 요청 입력 (예: "이 코드 설명해줘")
2. **스킬 탐색** - Claude Code가 `.claude/skills/` 디렉토리 스캔
3. **설명 매칭** - LLM이 요청과 스킬 설명을 매칭
4. **프롬프트 주입** - SKILL.md 내용이 프롬프트에 추가됨
5. **LLM 처리** - Claude가 스킬 지시사항을 따름
6. **출력** - 스킬 가이드라인에 따라 응답 포맷팅

### LLM에 전송되는 내용

```
┌─────────────────────────────────────┐
│  [시스템 지시사항]                   │
│  +                                  │
│  [SKILL.md 내용]  ◀── 여기에 주입    │
│  +                                  │
│  [사용자 메시지]                     │
└─────────────────────────────────────┘
```

## 스킬 만들기

### 디렉토리 구조

```
.claude/skills/
└── my-skill/
    └── SKILL.md
```

### SKILL.md 형식

```yaml
---
name: my-skill
description: 스킬 기능 설명. [트리거 시나리오]일 때 사용.
---

# My Skill

## Instructions
1. 첫 번째 단계
2. 두 번째 단계

## Examples
- 사용 예시
```

### 주요 필드

| 필드 | 필수 | 용도 |
|------|------|------|
| `name` | 예 | 고유 식별자 (소문자, 하이픈) |
| `description` | 예 | 스킬 활성화 시점 결정 |
| `allowed-tools` | 아니오 | 사용 가능한 도구 제한 |

## 스킬 저장 위치

| 위치 | 범위 |
|------|------|
| `.claude/skills/` | 프로젝트 (git으로 공유) |
| `~/.claude/skills/` | 개인 (모든 프로젝트) |

## 스킬을 사용하는 이유

**스킬 없이:**
```
사용자: "이 코드 설명해줘. ASCII 다이어그램 사용하고,
컴포넌트별로 나누고, 예시도 보여줘..."
```

**스킬 사용:**
```
사용자: "이 코드 설명해줘"
(SKILL.md가 자동으로 지시사항 추가)
```

**스킬 = 자동으로 활성화되는 재사용 가능한 프롬프트 템플릿**

## 스킬이 도구(함수)를 사용하는 방식

스킬이 도구(Read, Bash, Grep 등)를 호출해야 할 때, LLM이 루프에서 도구 호출을 조율합니다:

```
┌────────┐    ┌─────────────────┐    ┌─────────┐    ┌───────────────┐
│ 사용자  │───▶│ 프롬프트 + 스킬  │───▶│   LLM   │───▶│   도구 호출    │
└────────┘    └─────────────────┘    └─────────┘    │  (예: Bash)   │
                                          │         └───────┬───────┘
                                          │                 │
                                          │         ┌───────▼───────┐
                                          │         │   도구 실행    │
                                          │         └───────┬───────┘
                                          │                 │
                                          │◀────────────────┘
                                          │         도구 결과
                                          ▼
                                    ┌──────────┐
                                    │   출력   │
                                    └──────────┘
```

### 에이전트 루프

```
          ┌─────────────────────────────────┐
          │                                 │
          ▼                                 │
    ┌───────────┐                          │
    │    LLM    │                          │
    └─────┬─────┘                          │
          │                                 │
          ▼                                 │
    ┌───────────┐      ┌───────────┐       │
    │  도구 호출 │ ───▶ │    실행   │       │
    └───────────┘      └─────┬─────┘       │
                             │              │
                             ▼              │
                       ┌───────────┐        │
                       │   결과    │────────┘
                       └───────────┘
                             │
                     (완료될 때까지 반복)
                             │
                             ▼
                       ┌───────────┐
                       │   출력    │
                       └───────────┘
```

**LLM은 답변에 충분한 정보를 얻을 때까지 도구를 계속 호출합니다.**

### 컴포넌트 역할

| 컴포넌트 | 역할 |
|----------|------|
| **SKILL.md** | *어떤 도구를* 사용하고 *어떻게* 사용할지 지시 |
| **LLM** | 스킬 지시에 따라 *언제* 도구를 호출할지 결정 |
| **도구(Tools)** | 실제 실행 (Bash, Read, Glob 등) |
| **Claude Code CLI** | LLM과 도구 간 루프 조율 |

**스킬은 함수를 직접 실행하지 않습니다 - LLM에게 어떤 도구를 사용할지 알려주고, LLM이 언제 호출할지 결정합니다.**

## 추적 다이어그램: Pytest 스킬 흐름

### 시퀀스 다이어그램

```
  사용자           CLAUDE CODE CLI          SKILL.md             LLM (API)             도구
   │                      │                      │                      │                 │
   │  "테스트 실행해줘"    │                      │                      │                 │
   │─────────────────────▶│                      │                      │                 │
   │                      │                      │                      │                 │
   │                      │  스킬 설명 로드       │                      │                 │
   │                      │─────────────────────▶│                      │                 │
   │                      │◀─────────────────────│                      │                 │
   │                      │                      │                      │                 │
   │                      │  프롬프트 구성 후 API 전송                    │                 │
   │                      │─────────────────────────────────────────────▶│                 │
   │                      │                      │                      │                 │
   │                      │                      │    ┌─────────────────┴────────────┐   │
   │                      │                      │    │ 매칭: "테스트 실행"이        │   │
   │                      │                      │    │ test-runner 스킬 설명과 일치 │   │
   │                      │                      │    └─────────────────┬────────────┘   │
   │                      │                      │                      │                 │
   │                      │                      │  전체 SKILL.md 내용 요청              │
   │                      │                      │◀─────────────────────│                 │
   │                      │                      │─────────────────────▶│                 │
   │                      │                      │                      │                 │
   │                      │◀─────────────────────────────────────────────│                 │
   │                      │  도구 호출: Bash("pytest test_calculator.py -v")              │
   │                      │                      │                      │                 │
   │                      │  명령 실행           │                      │                 │
   │                      │───────────────────────────────────────────────────────────────▶
   │                      │                      │                      │                 │
   │                      │  결과: "pytest를 찾을 수 없음"               │                 │
   │                      │◀───────────────────────────────────────────────────────────────
   │                      │                      │                      │                 │
   │                      │  도구 결과 반환      │                      │                 │
   │                      │─────────────────────────────────────────────▶│                 │
   │                      │                      │                      │                 │
   │                      │                      │    ┌─────────────────┴────────────┐   │
   │                      │                      │    │ 추론: pytest 없음            │   │
   │                      │                      │    │ 결정: 설치 시도              │   │
   │                      │                      │    └─────────────────┬────────────┘   │
   │                      │                      │                      │                 │
   │                      │  ... (설치 후 재시도) ...                    │                 │
   │                      │                      │                      │                 │
   │                      │  결과: "10개 통과, 0.02초"                   │                 │
   │                      │◀───────────────────────────────────────────────────────────────
   │                      │                      │                      │                 │
   │                      │                      │    ┌─────────────────┴────────────┐   │
   │                      │                      │    │ 포맷: 스킬 지시에 따라       │   │
   │                      │                      │    │ ✅ 통과: 10                  │   │
   │                      │                      │    │ ❌ 실패: 0                   │   │
   │                      │                      │    └─────────────────┬────────────┘   │
   │                      │                      │                      │                 │
   │                      │◀─────────────────────────────────────────────│                 │
   │                      │  최종 응답 (포맷팅됨)                        │                 │
   │                      │                      │                      │                 │
   │  결과 표시           │                      │                      │                 │
   │◀─────────────────────│                      │                      │                 │
   │                      │                      │                      │                 │
   ▼                      ▼                      ▼                      ▼                 ▼
```

### 엔티티 책임

```
┌────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                        │
│  ┌─────────┐         ┌──────────────┐         ┌───────────┐         ┌───────────┐    │
│  │  사용자  │         │ CLAUDE CODE  │         │    LLM    │         │   도구    │    │
│  │         │         │     CLI      │         │   (API)   │         │           │    │
│  └────┬────┘         └──────┬───────┘         └─────┬─────┘         └─────┬─────┘    │
│       │                     │                       │                     │          │
│  ┌────┴────┐         ┌──────┴───────┐         ┌─────┴─────┐         ┌─────┴─────┐    │
│  │ 요청    │         │ • 스킬 로드   │         │ • 스킬    │         │ • Bash    │    │
│  │ 제공    │         │ • 프롬프트   │         │   매칭    │         │   실행    │    │
│  │         │         │   구성       │         │ • 추론    │         │ • Glob    │    │
│  │ 출력    │         │ • API 전송   │         │ • 도구    │         │   실행    │    │
│  │ 수신    │         │ • 도구 실행   │         │   결정    │         │ • Read    │    │
│  │         │         │ • 결과 반환   │         │ • 출력    │         │   실행    │    │
│  │         │         │              │         │   포맷    │         │ • 기타    │    │
│  └─────────┘         └──────────────┘         └───────────┘         └───────────┘    │
│                                                                                        │
└────────────────────────────────────────────────────────────────────────────────────────┘
```

### 데이터 흐름 요약

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│   1. 사용자 입력         "테스트 실행해줘"                                   │
│          │                                                                  │
│          ▼                                                                  │
│   2. CLI가 프롬프트      시스템 프롬프트                                     │
│      구성               + 도구 정의                                         │
│                         + 스킬 설명  ◀── SKILL.md에서                       │
│                         + 사용자 메시지                                     │
│          │                                                                  │
│          ▼                                                                  │
│   3. LLM 수신 및        설명으로 스킬 매칭                                   │
│      매칭               전체 SKILL.md 내용 로드                             │
│          │                                                                  │
│          ▼                                                                  │
│   4. LLM 계획           "필요: 테스트 찾기 → 테스트 실행 → 보고"             │
│          │                                                                  │
│          ▼                                                                  │
│   5. 에이전트 루프       ┌─────────────────────────────────┐               │
│                         │  LLM ──▶ 도구 호출 ──▶ 결과     │               │
│                         │   ▲                       │     │               │
│                         │   └───────────────────────┘     │               │
│                         │        (완료될 때까지 반복)      │               │
│                         └─────────────────────────────────┘               │
│          │                                                                  │
│          ▼                                                                  │
│   6. 출력 포맷          SKILL.md 지시에 따라                                │
│          │              (✅ 통과: 10, ❌ 실패: 0)                           │
│          ▼                                                                  │
│   7. 표시               사용자가 포맷된 결과 확인                            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 예제 스킬

- `.claude/skills/code-explainer/SKILL.md` - 시각적 다이어그램으로 코드 설명
- `.claude/skills/test-runner/SKILL.md` - 테스트 실행 및 결과 분석

## 직접 해보기

스킬을 테스트할 예제 파일:

```
examples/
├── calculator.py        # 설명할 샘플 코드
└── test_calculator.py   # 실행할 샘플 테스트
```

### code-explainer 스킬 테스트:
```
> calculator.py 코드 설명해줘
```

### test-runner 스킬 테스트:
```
> 테스트 실행해줘
```
